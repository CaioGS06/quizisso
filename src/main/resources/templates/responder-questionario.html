<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
  <title>Quizisso - Responder Questionário</title>
  <th:block th:replace="~{fragments/cabecalho :: head}"></th:block>
</head>

<body>
  <th:block th:replace="~{fragments/cabecalho :: cabecalho}"></th:block>

  <main class="conteudo-principal">
    <div class="container-questionario">
      <div class="header-questionario">
        <button class="botao-voltar" onclick="window.location.href='/'">
          <i class="ti ti-arrow-left"></i>
          Voltar
        </button>
        <div class="info-questionario">
          <h1 th:text="${questionario.titulo}">Quiz</h1>
          <p class="descricao-questionario-visualizacao"
            th:if="${questionario.descricao != null && !questionario.descricao.isEmpty()}"
            th:text="${questionario.descricao}">Descrição do questionário</p>
          <div class="info-criador-header">
            <img th:src="@{'/img/usuario' + ${questionario.criador.fotoId} + '.jpg'}"
              th:alt="${questionario.criador.nome}" class="foto-criador" alt="Foto do criador">
            <span>Criado por <strong th:text="${questionario.criador.nome}">Criador</strong></span>
          </div>
        </div>
      </div>

      <!-- Mensagens de sucesso e erro -->
      <div th:if="${sucesso}" class="mensagem-sucesso">
        <i class="ti ti-check"></i>
        <span th:text="${sucesso}">Sucesso!</span>
      </div>

      <div th:if="${erro}" class="mensagem-erro">
        <i class="ti ti-alert-circle"></i>
        <span th:text="${erro}">Erro!</span>
      </div>

      <form class="formulario-questionario" method="post" th:action="@{/responder-questionario(id=${questionario.id})}">
        <!-- Loop através dos itens do questionário -->
        <div class="questao-card" th:each="item, iterStat : ${questionario.listaItens}">
          <div class="questao-header">
            <span class="questao-numero" th:text="'Questão ' + ${iterStat.count}">Questão 1</span>
            <span class="questao-tipo"
              th:text="${item.tipo == 'ALTERNATIVA' ? 'Alternativa' : 'Dissertativa'}">Alternativa</span>
          </div>
          <h3 class="questao-enunciado" th:text="${item.enunciado}">Enunciado da questão</h3>

          <!-- Alternativas (apenas para QuestaoAlternativa) -->
          <div class="alternativas" th:if="${item.tipo == 'ALTERNATIVA'}">
            <label class="alternativa" th:each="alternativa, altIterStat : ${item.alternativas}">
              <input type="radio" th:name="'questao' + ${iterStat.count}" th:value="${altIterStat.index}" required>
              <span th:text="${alternativa.descricao}">Alternativa</span>
            </label>
          </div>

          <!-- Campo dissertativo (apenas para QuestaoDissertativa) -->
          <textarea class="campo-dissertativa" th:if="${item.tipo == 'DISSERTATIVA'}"
            th:name="'questao' + ${iterStat.count}" placeholder="Digite sua resposta aqui..." rows="6"
            required></textarea>
        </div>

        <div class="acoes-formulario">
          <button type="submit" class="botao-enviar">
            <i class="ti ti-send"></i>
            Enviar Respostas
          </button>
        </div>
      </form>
    </div>
  </main>

  <th:block th:replace="~{fragments/cabecalho :: scripts}"></th:block>
</body>

</html>